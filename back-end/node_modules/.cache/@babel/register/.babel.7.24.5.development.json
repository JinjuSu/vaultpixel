<<<<<<< HEAD
{"{\"assumptions\":{},\"sourceRoot\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end\",\"filename\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _mongodb = require(\"mongodb\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _express = _interopRequireDefault(require(\"express\"));\n// Connect MongoDB when the server is started\nfunction start() {\n  return _start.apply(this, arguments);\n}\nfunction _start() {\n  _start = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee11() {\n    var mongodbURL, client, db, app, populatedCartIds, _populatedCartIds;\n    return _regenerator[\"default\"].wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _populatedCartIds = function _populatedCartIds3() {\n            _populatedCartIds = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(ids) {\n              return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n                while (1) switch (_context10.prev = _context10.next) {\n                  case 0:\n                    return _context10.abrupt(\"return\", Promise.all(ids.map(function (id) {\n                      return db.collection(\"products\").findOne({\n                        id: id\n                      });\n                    }) // Equivalent to using map() in API calling level\n                    ));\n                  case 1:\n                  case \"end\":\n                    return _context10.stop();\n                }\n              }, _callee10);\n            }));\n            return _populatedCartIds.apply(this, arguments);\n          };\n          populatedCartIds = function _populatedCartIds2(_x) {\n            return _populatedCartIds.apply(this, arguments);\n          };\n          mongodbURL = \"mongodb+srv://vaultpixel-db:769s46jD1a2fLPNK@database1.sqf5wlh.mongodb.net/?retryWrites=true&w=majority&appName=Database1\";\n          client = new _mongodb.MongoClient(mongodbURL);\n          _context11.next = 6;\n          return client.connect();\n        case 6:\n          db = client.db(\"vaultpixel-db\");\n          app = (0, _express[\"default\"])();\n          app.use(_express[\"default\"].json());\n          app.use(\"/images\", _express[\"default\"][\"static\"](_path[\"default\"].join(__dirname, \"../assets/wallets\"))); // Enable Express server to serve images for the front-end\n\n          // ------ Read items in the database using app.get() call back\n\n          // Get all orders from orders table\n          app.get(\"/api/orders\", /*#__PURE__*/function () {\n            var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n              var orders;\n              return _regenerator[\"default\"].wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return db.collection(\"orders\").find({}).toArray();\n                  case 3:\n                    orders = _context.sent;\n                    console.log(\"Orders fetched from database:\", orders);\n                    res.send(orders);\n                    _context.next = 12;\n                    break;\n                  case 8:\n                    _context.prev = 8;\n                    _context.t0 = _context[\"catch\"](0);\n                    console.error(\"Failed to fetch orders:\", _context.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 12:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee, null, [[0, 8]]);\n            }));\n            return function (_x2, _x3) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n\n          // Get the last order from orders table\n          app.get(\"/api/orders/last\", /*#__PURE__*/function () {\n            var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n              var lastOrder;\n              return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n                    _context2.next = 3;\n                    return db.collection(\"orders\").find({}).sort({\n                      orderId: -1\n                    }).limit(1).toArray();\n                  case 3:\n                    lastOrder = _context2.sent;\n                    if (lastOrder.length === 0) {\n                      res.status(404).send(\"No orders found\");\n                    } else {\n                      res.send(lastOrder[0]);\n                    }\n                    _context2.next = 11;\n                    break;\n                  case 7:\n                    _context2.prev = 7;\n                    _context2.t0 = _context2[\"catch\"](0);\n                    console.error(\"Failed to fetch last order:\", _context2.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 11:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2, null, [[0, 7]]);\n            }));\n            return function (_x4, _x5) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n\n          // Post a new order into orders table\n          app.post(\"/api/orders\", /*#__PURE__*/function () {\n            var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res) {\n              var newOrder;\n              return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    newOrder = req.body;\n                    _context3.next = 4;\n                    return db.collection(\"orders\").insertOne(newOrder);\n                  case 4:\n                    res.status(201).send(\"Order created\");\n                    _context3.next = 11;\n                    break;\n                  case 7:\n                    _context3.prev = 7;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    console.error(\"Failed to create order:\", _context3.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 11:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }, _callee3, null, [[0, 7]]);\n            }));\n            return function (_x6, _x7) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n\n          // Update user's purchasedOrders list\n          app.put(\"/api/users/:userId/purchasedOrders\", /*#__PURE__*/function () {\n            var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n              var userId, orderId;\n              return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n                while (1) switch (_context4.prev = _context4.next) {\n                  case 0:\n                    _context4.prev = 0;\n                    userId = req.params.userId;\n                    orderId = req.body.orderId;\n                    _context4.next = 5;\n                    return db.collection(\"users\").updateOne({\n                      id: userId\n                    }, {\n                      $addToSet: {\n                        purchasedOrders: orderId\n                      } // $addToSet prevents duplicates\n                    });\n                  case 5:\n                    res.status(200).send(\"Purchased orders updated\");\n                    _context4.next = 12;\n                    break;\n                  case 8:\n                    _context4.prev = 8;\n                    _context4.t0 = _context4[\"catch\"](0);\n                    console.error(\"Failed to update purchased orders:\", _context4.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 12:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }, _callee4, null, [[0, 8]]);\n            }));\n            return function (_x8, _x9) {\n              return _ref4.apply(this, arguments);\n            };\n          }());\n\n          // Get products from products table\n          app.get(\"/api/products\", /*#__PURE__*/function () {\n            var _ref5 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res) {\n              var products;\n              return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.next = 2;\n                    return db.collection(\"products\").find({}).toArray();\n                  case 2:\n                    products = _context5.sent;\n                    res.send(products);\n                  case 4:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }, _callee5);\n            }));\n            return function (_x10, _x11) {\n              return _ref5.apply(this, arguments);\n            };\n          }());\n          app.get(\"/api/users/:userId/cart\", /*#__PURE__*/function () {\n            var _ref6 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n              var user, populatedCart;\n              return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n                while (1) switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _context6.next = 2;\n                    return db.collection(\"users\").findOne({\n                      id: req.params.userId\n                    });\n                  case 2:\n                    user = _context6.sent;\n                    _context6.next = 5;\n                    return populatedCartIds((user === null || user === void 0 ? void 0 : user.cartItems) || []);\n                  case 5:\n                    populatedCart = _context6.sent;\n                    // passing cartItems as ids argument\n                    res.json(populatedCart);\n                  case 7:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }, _callee6);\n            }));\n            return function (_x12, _x13) {\n              return _ref6.apply(this, arguments);\n            };\n          }());\n          app.get(\"/api/product/:productId\", /*#__PURE__*/function () {\n            var _ref7 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(req, res) {\n              var productId, product;\n              return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n                while (1) switch (_context7.prev = _context7.next) {\n                  case 0:\n                    productId = req.params.productId;\n                    _context7.next = 3;\n                    return db.collection(\"products\").findOne({\n                      id: productId\n                    });\n                  case 3:\n                    product = _context7.sent;\n                    res.json(product);\n                  case 5:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }, _callee7);\n            }));\n            return function (_x14, _x15) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n\n          // ------ Add item to cart w/ POST callback function\n          app.post(\"/api/users/:userId/cart\", /*#__PURE__*/function () {\n            var _ref8 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(req, res) {\n              var userId, productId, existingUser, user, populatedCart;\n              return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n                while (1) switch (_context8.prev = _context8.next) {\n                  case 0:\n                    userId = req.params.userId;\n                    productId = req.body.id;\n                    _context8.next = 4;\n                    return db.collection(\"users\").findOne({\n                      id: userId\n                    });\n                  case 4:\n                    existingUser = _context8.sent;\n                    if (existingUser) {\n                      _context8.next = 8;\n                      break;\n                    }\n                    _context8.next = 8;\n                    return db.collection(\"users\").insertOne({\n                      id: userId,\n                      cartItems: []\n                    });\n                  case 8:\n                    _context8.next = 10;\n                    return db.collection(\"users\").updateOne({\n                      id: userId\n                    }, {\n                      $addToSet: {\n                        cartItems: productId\n                      } // $addToSet doesn't add duplicate items like $push\n                    });\n                  case 10:\n                    _context8.next = 12;\n                    return db.collection(\"users\").findOne({\n                      id: req.params.userId\n                    });\n                  case 12:\n                    user = _context8.sent;\n                    _context8.next = 15;\n                    return populatedCartIds((user === null || user === void 0 ? void 0 : user.cartItems) || []);\n                  case 15:\n                    populatedCart = _context8.sent;\n                    // passing cartItems as ids argument\n                    res.json(populatedCart);\n                  case 17:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }, _callee8);\n            }));\n            return function (_x16, _x17) {\n              return _ref8.apply(this, arguments);\n            };\n          }());\n\n          // ------ Remove item from cart w/ DELETE callback function\n          app[\"delete\"](\"/api/users/:userId/cart/:productId\", /*#__PURE__*/function () {\n            var _ref9 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(req, res) {\n              var userId, productId, user, populatedCart;\n              return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n                while (1) switch (_context9.prev = _context9.next) {\n                  case 0:\n                    userId = req.params.userId;\n                    productId = req.params.productId;\n                    _context9.next = 4;\n                    return db.collection(\"users\").updateOne({\n                      id: userId\n                    }, {\n                      $pull: {\n                        cartItems: productId\n                      }\n                    });\n                  case 4:\n                    _context9.next = 6;\n                    return db.collection(\"users\").findOne({\n                      id: req.params.userId\n                    });\n                  case 6:\n                    user = _context9.sent;\n                    _context9.next = 9;\n                    return populatedCartIds((user === null || user === void 0 ? void 0 : user.cartItems) || []);\n                  case 9:\n                    populatedCart = _context9.sent;\n                    // passing cartItems as ids argument\n                    res.json(populatedCart);\n                  case 11:\n                  case \"end\":\n                    return _context9.stop();\n                }\n              }, _callee9);\n            }));\n            return function (_x18, _x19) {\n              return _ref9.apply(this, arguments);\n            };\n          }());\n          app.listen(8000, function () {\n            console.log(\"Server is listening on port 8000\");\n          });\n        case 20:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11);\n  }));\n  return _start.apply(this, arguments);\n}\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29kYiIsInJlcXVpcmUiLCJfcGF0aCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzcyIsInN0YXJ0IiwiX3N0YXJ0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZTExIiwibW9uZ29kYlVSTCIsImNsaWVudCIsImRiIiwiYXBwIiwicG9wdWxhdGVkQ2FydElkcyIsIl9wb3B1bGF0ZWRDYXJ0SWRzIiwid3JhcCIsIl9jYWxsZWUxMSQiLCJfY29udGV4dDExIiwicHJldiIsIm5leHQiLCJfcG9wdWxhdGVkQ2FydElkczMiLCJfY2FsbGVlMTAiLCJpZHMiLCJfY2FsbGVlMTAkIiwiX2NvbnRleHQxMCIsImFicnVwdCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpZCIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwic3RvcCIsIl9wb3B1bGF0ZWRDYXJ0SWRzMiIsIl94IiwiTW9uZ29DbGllbnQiLCJjb25uZWN0IiwiZXhwcmVzcyIsInVzZSIsImpzb24iLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImdldCIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwib3JkZXJzIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsImZpbmQiLCJ0b0FycmF5Iiwic2VudCIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwidDAiLCJlcnJvciIsInN0YXR1cyIsIl94MiIsIl94MyIsIl9yZWYyIiwiX2NhbGxlZTIiLCJsYXN0T3JkZXIiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJzb3J0Iiwib3JkZXJJZCIsImxpbWl0IiwibGVuZ3RoIiwiX3g0IiwiX3g1IiwicG9zdCIsIl9yZWYzIiwiX2NhbGxlZTMiLCJuZXdPcmRlciIsIl9jYWxsZWUzJCIsIl9jb250ZXh0MyIsImJvZHkiLCJpbnNlcnRPbmUiLCJfeDYiLCJfeDciLCJwdXQiLCJfcmVmNCIsIl9jYWxsZWU0IiwidXNlcklkIiwiX2NhbGxlZTQkIiwiX2NvbnRleHQ0IiwicGFyYW1zIiwidXBkYXRlT25lIiwiJGFkZFRvU2V0IiwicHVyY2hhc2VkT3JkZXJzIiwiX3g4IiwiX3g5IiwiX3JlZjUiLCJfY2FsbGVlNSIsInByb2R1Y3RzIiwiX2NhbGxlZTUkIiwiX2NvbnRleHQ1IiwiX3gxMCIsIl94MTEiLCJfcmVmNiIsIl9jYWxsZWU2IiwidXNlciIsInBvcHVsYXRlZENhcnQiLCJfY2FsbGVlNiQiLCJfY29udGV4dDYiLCJjYXJ0SXRlbXMiLCJfeDEyIiwiX3gxMyIsIl9yZWY3IiwiX2NhbGxlZTciLCJwcm9kdWN0SWQiLCJwcm9kdWN0IiwiX2NhbGxlZTckIiwiX2NvbnRleHQ3IiwiX3gxNCIsIl94MTUiLCJfcmVmOCIsIl9jYWxsZWU4IiwiZXhpc3RpbmdVc2VyIiwiX2NhbGxlZTgkIiwiX2NvbnRleHQ4IiwiX3gxNiIsIl94MTciLCJfcmVmOSIsIl9jYWxsZWU5IiwiX2NhbGxlZTkkIiwiX2NvbnRleHQ5IiwiJHB1bGwiLCJfeDE4IiwiX3gxOSIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2JpbGwubS9EZXNrdG9wL21hc3Rlci9Td2luYnVybmUvdmF1bHQtcGl4ZWwvYmFjay1lbmQvc3JjLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuXG4vLyBDb25uZWN0IE1vbmdvREIgd2hlbiB0aGUgc2VydmVyIGlzIHN0YXJ0ZWRcbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICBjb25zdCBtb25nb2RiVVJMID0gYG1vbmdvZGIrc3J2Oi8vdmF1bHRwaXhlbC1kYjo3NjlzNDZqRDFhMmZMUE5LQGRhdGFiYXNlMS5zcWY1d2xoLm1vbmdvZGIubmV0Lz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHkmYXBwTmFtZT1EYXRhYmFzZTFgO1xuICBjb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQobW9uZ29kYlVSTCk7XG5cbiAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoXCJ2YXVsdHBpeGVsLWRiXCIpO1xuXG4gIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuICBhcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbiAgYXBwLnVzZShcIi9pbWFnZXNcIiwgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi9hc3NldHMvd2FsbGV0c1wiKSkpOyAvLyBFbmFibGUgRXhwcmVzcyBzZXJ2ZXIgdG8gc2VydmUgaW1hZ2VzIGZvciB0aGUgZnJvbnQtZW5kXG5cbiAgYXN5bmMgZnVuY3Rpb24gcG9wdWxhdGVkQ2FydElkcyhpZHMpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICBpZHMubWFwKChpZCkgPT4gZGIuY29sbGVjdGlvbihcInByb2R1Y3RzXCIpLmZpbmRPbmUoeyBpZCB9KSkgLy8gRXF1aXZhbGVudCB0byB1c2luZyBtYXAoKSBpbiBBUEkgY2FsbGluZyBsZXZlbFxuICAgICk7XG4gIH1cblxuICAvLyAtLS0tLS0gUmVhZCBpdGVtcyBpbiB0aGUgZGF0YWJhc2UgdXNpbmcgYXBwLmdldCgpIGNhbGwgYmFja1xuXG4gIC8vIEdldCBhbGwgb3JkZXJzIGZyb20gb3JkZXJzIHRhYmxlXG4gIGFwcC5nZXQoXCIvYXBpL29yZGVyc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgZGIuY29sbGVjdGlvbihcIm9yZGVyc1wiKS5maW5kKHt9KS50b0FycmF5KCk7XG4gICAgICBjb25zb2xlLmxvZyhcIk9yZGVycyBmZXRjaGVkIGZyb20gZGF0YWJhc2U6XCIsIG9yZGVycyk7XG4gICAgICByZXMuc2VuZChvcmRlcnMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIG9yZGVyczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBHZXQgdGhlIGxhc3Qgb3JkZXIgZnJvbSBvcmRlcnMgdGFibGVcbiAgYXBwLmdldChcIi9hcGkvb3JkZXJzL2xhc3RcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxhc3RPcmRlciA9IGF3YWl0IGRiXG4gICAgICAgIC5jb2xsZWN0aW9uKFwib3JkZXJzXCIpXG4gICAgICAgIC5maW5kKHt9KVxuICAgICAgICAuc29ydCh7IG9yZGVySWQ6IC0xIH0pXG4gICAgICAgIC5saW1pdCgxKVxuICAgICAgICAudG9BcnJheSgpO1xuICAgICAgaWYgKGxhc3RPcmRlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoXCJObyBvcmRlcnMgZm91bmRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc2VuZChsYXN0T3JkZXJbMF0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGxhc3Qgb3JkZXI6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUG9zdCBhIG5ldyBvcmRlciBpbnRvIG9yZGVycyB0YWJsZVxuICBhcHAucG9zdChcIi9hcGkvb3JkZXJzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdPcmRlciA9IHJlcS5ib2R5O1xuICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbihcIm9yZGVyc1wiKS5pbnNlcnRPbmUobmV3T3JkZXIpO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoXCJPcmRlciBjcmVhdGVkXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBvcmRlcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgdXNlcidzIHB1cmNoYXNlZE9yZGVycyBsaXN0XG4gIGFwcC5wdXQoXCIvYXBpL3VzZXJzLzp1c2VySWQvcHVyY2hhc2VkT3JkZXJzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSByZXEucGFyYW1zLnVzZXJJZDtcbiAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUoXG4gICAgICAgIHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgJGFkZFRvU2V0OiB7IHB1cmNoYXNlZE9yZGVyczogb3JkZXJJZCB9LCAvLyAkYWRkVG9TZXQgcHJldmVudHMgZHVwbGljYXRlc1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlB1cmNoYXNlZCBvcmRlcnMgdXBkYXRlZFwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgcHVyY2hhc2VkIG9yZGVyczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBHZXQgcHJvZHVjdHMgZnJvbSBwcm9kdWN0cyB0YWJsZVxuICBhcHAuZ2V0KFwiL2FwaS9wcm9kdWN0c1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJwcm9kdWN0c1wiKS5maW5kKHt9KS50b0FycmF5KCk7XG4gICAgcmVzLnNlbmQocHJvZHVjdHMpO1xuICB9KTtcblxuICBhcHAuZ2V0KFwiL2FwaS91c2Vycy86dXNlcklkL2NhcnRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcInVzZXJzXCIpXG4gICAgICAuZmluZE9uZSh7IGlkOiByZXEucGFyYW1zLnVzZXJJZCB9KTtcbiAgICBjb25zdCBwb3B1bGF0ZWRDYXJ0ID0gYXdhaXQgcG9wdWxhdGVkQ2FydElkcyh1c2VyPy5jYXJ0SXRlbXMgfHwgW10pOyAvLyBwYXNzaW5nIGNhcnRJdGVtcyBhcyBpZHMgYXJndW1lbnRcbiAgICByZXMuanNvbihwb3B1bGF0ZWRDYXJ0KTtcbiAgfSk7XG5cbiAgYXBwLmdldChcIi9hcGkvcHJvZHVjdC86cHJvZHVjdElkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHByb2R1Y3RJZCA9IHJlcS5wYXJhbXMucHJvZHVjdElkO1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwicHJvZHVjdHNcIikuZmluZE9uZSh7IGlkOiBwcm9kdWN0SWQgfSk7XG4gICAgcmVzLmpzb24ocHJvZHVjdCk7XG4gIH0pO1xuXG4gIC8vIC0tLS0tLSBBZGQgaXRlbSB0byBjYXJ0IHcvIFBPU1QgY2FsbGJhY2sgZnVuY3Rpb25cbiAgYXBwLnBvc3QoXCIvYXBpL3VzZXJzLzp1c2VySWQvY2FydFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSByZXEucGFyYW1zLnVzZXJJZDtcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEuYm9keS5pZDtcblxuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHsgaWQ6IHVzZXJJZCB9KTsgLy8gaWQgaW4gTW9uZ29CRCdzIHVzZXIgY29sbGVjdGlvbiB0aGF0IGlzIGVxdWFsIHRvIHVzZXJJZCBmcm9tIGZpcmViYXNlQXV0aFxuXG4gICAgaWYgKCFleGlzdGluZ1VzZXIpIHtcbiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5pbnNlcnRPbmUoeyBpZDogdXNlcklkLCBjYXJ0SXRlbXM6IFtdIH0pOyAvLyBJZiBub3QgdGhlcmUgYWxyZWFkeSwgaW5zZXJ0IGludG8gdGhlIGNvbGxlY3Rpb24uXG4gICAgfVxuXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLnVwZGF0ZU9uZShcbiAgICAgIHsgaWQ6IHVzZXJJZCB9LFxuICAgICAge1xuICAgICAgICAkYWRkVG9TZXQ6IHsgY2FydEl0ZW1zOiBwcm9kdWN0SWQgfSwgLy8gJGFkZFRvU2V0IGRvZXNuJ3QgYWRkIGR1cGxpY2F0ZSBpdGVtcyBsaWtlICRwdXNoXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgIC5maW5kT25lKHsgaWQ6IHJlcS5wYXJhbXMudXNlcklkIH0pO1xuICAgIGNvbnN0IHBvcHVsYXRlZENhcnQgPSBhd2FpdCBwb3B1bGF0ZWRDYXJ0SWRzKHVzZXI/LmNhcnRJdGVtcyB8fCBbXSk7IC8vIHBhc3NpbmcgY2FydEl0ZW1zIGFzIGlkcyBhcmd1bWVudFxuICAgIHJlcy5qc29uKHBvcHVsYXRlZENhcnQpO1xuICB9KTtcblxuICAvLyAtLS0tLS0gUmVtb3ZlIGl0ZW0gZnJvbSBjYXJ0IHcvIERFTEVURSBjYWxsYmFjayBmdW5jdGlvblxuICBhcHAuZGVsZXRlKFwiL2FwaS91c2Vycy86dXNlcklkL2NhcnQvOnByb2R1Y3RJZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSByZXEucGFyYW1zLnVzZXJJZDtcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLnByb2R1Y3RJZDtcbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKFxuICAgICAgeyBpZDogdXNlcklkIH0sXG4gICAgICB7XG4gICAgICAgICRwdWxsOiB7IGNhcnRJdGVtczogcHJvZHVjdElkIH0sXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgIC5maW5kT25lKHsgaWQ6IHJlcS5wYXJhbXMudXNlcklkIH0pO1xuICAgIGNvbnN0IHBvcHVsYXRlZENhcnQgPSBhd2FpdCBwb3B1bGF0ZWRDYXJ0SWRzKHVzZXI/LmNhcnRJdGVtcyB8fCBbXSk7IC8vIHBhc3NpbmcgY2FydEl0ZW1zIGFzIGlkcyBhcmd1bWVudFxuICAgIHJlcy5qc29uKHBvcHVsYXRlZENhcnQpO1xuICB9KTtcblxuICBhcHAubGlzdGVuKDgwMDAsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlcnZlciBpcyBsaXN0ZW5pbmcgb24gcG9ydCA4MDAwXCIpO1xuICB9KTtcbn1cblxuc3RhcnQoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFFQTtBQUFBLFNBQ2VJLEtBQUtBLENBQUE7RUFBQSxPQUFBQyxNQUFBLENBQUFDLEtBQUEsT0FBQUMsU0FBQTtBQUFBO0FBQUEsU0FBQUYsT0FBQTtFQUFBQSxNQUFBLE9BQUFHLGtCQUFBLDJCQUFBQyxZQUFBLFlBQUFDLElBQUEsQ0FBcEIsU0FBQUMsVUFBQTtJQUFBLElBQUFDLFVBQUEsRUFBQUMsTUFBQSxFQUFBQyxFQUFBLEVBQUFDLEdBQUEsRUFZaUJDLGdCQUFnQixFQUFBQyxpQkFBQTtJQUFB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","map":{"version":3,"names":["_mongodb","require","_path","_interopRequireDefault","_express","start","_start","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee11","mongodbURL","client","db","app","populatedCartIds","_populatedCartIds","wrap","_callee11$","_context11","prev","next","_populatedCartIds3","_callee10","ids","_callee10$","_context10","abrupt","Promise","all","map","id","collection","findOne","stop","_populatedCartIds2","_x","MongoClient","connect","express","use","json","path","join","__dirname","get","_ref","_callee","req","res","orders","_callee$","_context","find","toArray","sent","console","log","send","t0","error","status","_x2","_x3","_ref2","_callee2","lastOrder","_callee2$","_context2","sort","orderId","limit","length","_x4","_x5","post","_ref3","_callee3","newOrder","_callee3$","_context3","body","insertOne","_x6","_x7","put","_ref4","_callee4","userId","_callee4$","_context4","params","updateOne","$addToSet","purchasedOrders","_x8","_x9","_ref5","_callee5","products","_callee5$","_context5","_x10","_x11","_ref6","_callee6","user","populatedCart","_callee6$","_context6","cartItems","_x12","_x13","_ref7","_callee7","productId","product","_callee7$","_context7","_x14","_x15","_ref8","_callee8","existingUser","_callee8$","_context8","_x16","_x17","_ref9","_callee9","_callee9$","_context9","$pull","_x18","_x19","listen"],"sourceRoot":"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end/src/","sources":["server.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\nimport path from \"path\";\nimport express from \"express\";\n\n// Connect MongoDB when the server is started\nasync function start() {\n  const mongodbURL = `mongodb+srv://vaultpixel-db:769s46jD1a2fLPNK@database1.sqf5wlh.mongodb.net/?retryWrites=true&w=majority&appName=Database1`;\n  const client = new MongoClient(mongodbURL);\n\n  await client.connect();\n  const db = client.db(\"vaultpixel-db\");\n\n  const app = express();\n\n  app.use(express.json());\n  app.use(\"/images\", express.static(path.join(__dirname, \"../assets/wallets\"))); // Enable Express server to serve images for the front-end\n\n  async function populatedCartIds(ids) {\n    return Promise.all(\n      ids.map((id) => db.collection(\"products\").findOne({ id })) // Equivalent to using map() in API calling level\n    );\n  }\n\n  // ------ Read items in the database using app.get() call back\n\n  // Get all orders from orders table\n  app.get(\"/api/orders\", async (req, res) => {\n    try {\n      const orders = await db.collection(\"orders\").find({}).toArray();\n      console.log(\"Orders fetched from database:\", orders);\n      res.send(orders);\n    } catch (error) {\n      console.error(\"Failed to fetch orders:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Get the last order from orders table\n  app.get(\"/api/orders/last\", async (req, res) => {\n    try {\n      const lastOrder = await db\n        .collection(\"orders\")\n        .find({})\n        .sort({ orderId: -1 })\n        .limit(1)\n        .toArray();\n      if (lastOrder.length === 0) {\n        res.status(404).send(\"No orders found\");\n      } else {\n        res.send(lastOrder[0]);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch last order:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Post a new order into orders table\n  app.post(\"/api/orders\", async (req, res) => {\n    try {\n      const newOrder = req.body;\n      await db.collection(\"orders\").insertOne(newOrder);\n      res.status(201).send(\"Order created\");\n    } catch (error) {\n      console.error(\"Failed to create order:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Update user's purchasedOrders list\n  app.put(\"/api/users/:userId/purchasedOrders\", async (req, res) => {\n    try {\n      const userId = req.params.userId;\n      const { orderId } = req.body;\n\n      await db.collection(\"users\").updateOne(\n        { id: userId },\n        {\n          $addToSet: { purchasedOrders: orderId }, // $addToSet prevents duplicates\n        }\n      );\n\n      res.status(200).send(\"Purchased orders updated\");\n    } catch (error) {\n      console.error(\"Failed to update purchased orders:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Get products from products table\n  app.get(\"/api/products\", async (req, res) => {\n    const products = await db.collection(\"products\").find({}).toArray();\n    res.send(products);\n  });\n\n  app.get(\"/api/users/:userId/cart\", async (req, res) => {\n    const user = await db\n      .collection(\"users\")\n      .findOne({ id: req.params.userId });\n    const populatedCart = await populatedCartIds(user?.cartItems || []); // passing cartItems as ids argument\n    res.json(populatedCart);\n  });\n\n  app.get(\"/api/product/:productId\", async (req, res) => {\n    const productId = req.params.productId;\n    const product = await db.collection(\"products\").findOne({ id: productId });\n    res.json(product);\n  });\n\n  // ------ Add item to cart w/ POST callback function\n  app.post(\"/api/users/:userId/cart\", async (req, res) => {\n    const userId = req.params.userId;\n    const productId = req.body.id;\n\n    const existingUser = await db.collection(\"users\").findOne({ id: userId }); // id in MongoBD's user collection that is equal to userId from firebaseAuth\n\n    if (!existingUser) {\n      await db.collection(\"users\").insertOne({ id: userId, cartItems: [] }); // If not there already, insert into the collection.\n    }\n\n    await db.collection(\"users\").updateOne(\n      { id: userId },\n      {\n        $addToSet: { cartItems: productId }, // $addToSet doesn't add duplicate items like $push\n      }\n    );\n    const user = await db\n      .collection(\"users\")\n      .findOne({ id: req.params.userId });\n    const populatedCart = await populatedCartIds(user?.cartItems || []); // passing cartItems as ids argument\n    res.json(populatedCart);\n  });\n\n  // ------ Remove item from cart w/ DELETE callback function\n  app.delete(\"/api/users/:userId/cart/:productId\", async (req, res) => {\n    const userId = req.params.userId;\n    const productId = req.params.productId;\n    await db.collection(\"users\").updateOne(\n      { id: userId },\n      {\n        $pull: { cartItems: productId },\n      }\n    );\n    const user = await db\n      .collection(\"users\")\n      .findOne({ id: req.params.userId });\n    const populatedCart = await populatedCartIds(user?.cartItems || []); // passing cartItems as ids argument\n    res.json(populatedCart);\n  });\n\n  app.listen(8000, () => {\n    console.log(\"Server is listening on port 8000\");\n  });\n}\n\nstart();\n"],"mappings":";;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,QAAA,GAAAD,sBAAA,CAAAF,OAAA;AAEA;AAAA,SACeI,KAAKA,CAAA;EAAA,OAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,OAAA;EAAAA,MAAA,OAAAG,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAApB,SAAAC,UAAA;IAAA,IAAAC,UAAA,EAAAC,MAAA,EAAAC,EAAA,EAAAC,GAAA,EAYiBC,gBAAgB,EAAAC,iBAAA;IAAA,OAAAR,YAAA,YAAAS,IAAA,UAAAC,WAAAC,UAAA;MAAA,kBAAAA,UAAA,CAAAC,IAAA,GAAAD,UAAA,CAAAE,IAAA;QAAA;UAAAL,iBAAA,YAAAM,mBAAA;YAAAN,iBAAA,OAAAT,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAA/B,SAAAc,UAAgCC,GAAG;cAAA,OAAAhB,YAAA,YAAAS,IAAA,UAAAQ,WAAAC,UAAA;gBAAA,kBAAAA,UAAA,CAAAN,IAAA,GAAAM,UAAA,CAAAL,IAAA;kBAAA;oBAAA,OAAAK,UAAA,CAAAC,MAAA,WAC1BC,OAAO,CAACC,GAAG,CAChBL,GAAG,CAACM,GAAG,CAAC,UAACC,EAAE;sBAAA,OAAKlB,EAAE,CAACmB,UAAU,CAAC,UAAU,CAAC,CAACC,OAAO,CAAC;wBAAEF,EAAE,EAAFA;sBAAG,CAAC,CAAC;oBAAA,EAAC,CAAC;oBAC7D,CAAC;kBAAA;kBAAA;oBAAA,OAAAL,UAAA,CAAAQ,IAAA;gBAAA;cAAA,GAAAX,SAAA;YAAA,CACF;YAAA,OAAAP,iBAAA,CAAAX,KAAA,OAAAC,SAAA;UAAA;UAJcS,gBAAgB,YAAAoB,mBAAAC,EAAA;YAAA,OAAApB,iBAAA,CAAAX,KAAA,OAAAC,SAAA;UAAA;UAXzBK,UAAU;UACVC,MAAM,GAAG,IAAIyB,oBAAW,CAAC1B,UAAU,CAAC;UAAAQ,UAAA,CAAAE,IAAA;UAAA,OAEpCT,MAAM,CAAC0B,OAAO,CAAC,CAAC;QAAA;UAChBzB,EAAE,GAAGD,MAAM,CAACC,EAAE,CAAC,eAAe,CAAC;UAE/BC,GAAG,GAAG,IAAAyB,mBAAO,EAAC,CAAC;UAErBzB,GAAG,CAAC0B,GAAG,CAACD,mBAAO,CAACE,IAAI,CAAC,CAAC,CAAC;UACvB3B,GAAG,CAAC0B,GAAG,CAAC,SAAS,EAAED,mBAAO,UAAO,CAACG,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;;UAQ/E;;UAEA;UACA9B,GAAG,CAAC+B,GAAG,CAAC,aAAa;YAAA,IAAAC,IAAA,OAAAvC,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAsC,QAAOC,GAAG,EAAEC,GAAG;cAAA,IAAAC,MAAA;cAAA,OAAA1C,YAAA,YAAAS,IAAA,UAAAkC,SAAAC,QAAA;gBAAA,kBAAAA,QAAA,CAAAhC,IAAA,GAAAgC,QAAA,CAAA/B,IAAA;kBAAA;oBAAA+B,QAAA,CAAAhC,IAAA;oBAAAgC,QAAA,CAAA/B,IAAA;oBAAA,OAEbR,EAAE,CAACmB,UAAU,CAAC,QAAQ,CAAC,CAACqB,IAAI,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;kBAAA;oBAAzDJ,MAAM,GAAAE,QAAA,CAAAG,IAAA;oBACZC,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEP,MAAM,CAAC;oBACpDD,GAAG,CAACS,IAAI,CAACR,MAAM,CAAC;oBAACE,QAAA,CAAA/B,IAAA;oBAAA;kBAAA;oBAAA+B,QAAA,CAAAhC,IAAA;oBAAAgC,QAAA,CAAAO,EAAA,GAAAP,QAAA;oBAEjBI,OAAO,CAACI,KAAK,CAAC,yBAAyB,EAAAR,QAAA,CAAAO,EAAO,CAAC;oBAC/CV,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,uBAAuB,CAAC;kBAAC;kBAAA;oBAAA,OAAAN,QAAA,CAAAlB,IAAA;gBAAA;cAAA,GAAAa,OAAA;YAAA,CAEjD;YAAA,iBAAAe,GAAA,EAAAC,GAAA;cAAA,OAAAjB,IAAA,CAAAzC,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;;UAEF;UACAQ,GAAG,CAAC+B,GAAG,CAAC,kBAAkB;YAAA,IAAAmB,KAAA,OAAAzD,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAwD,SAAOjB,GAAG,EAAEC,GAAG;cAAA,IAAAiB,SAAA;cAAA,OAAA1D,YAAA,YAAAS,IAAA,UAAAkD,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAhD,IAAA,GAAAgD,SAAA,CAAA/C,IAAA;kBAAA;oBAAA+C,SAAA,CAAAhD,IAAA;oBAAAgD,SAAA,CAAA/C,IAAA;oBAAA,OAEfR,EAAE,CACvBmB,UAAU,CAAC,QAAQ,CAAC,CACpBqB,IAAI,CAAC,CAAC,CAAC,CAAC,CACRgB,IAAI,CAAC;sBAAEC,OAAO,EAAE,CAAC;oBAAE,CAAC,CAAC,CACrBC,KAAK,CAAC,CAAC,CAAC,CACRjB,OAAO,CAAC,CAAC;kBAAA;oBALNY,SAAS,GAAAE,SAAA,CAAAb,IAAA;oBAMf,IAAIW,SAAS,CAACM,MAAM,KAAK,CAAC,EAAE;sBAC1BvB,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,iBAAiB,CAAC;oBACzC,CAAC,MAAM;sBACLT,GAAG,CAACS,IAAI,CAACQ,SAAS,CAAC,CAAC,CAAC,CAAC;oBACxB;oBAACE,SAAA,CAAA/C,IAAA;oBAAA;kBAAA;oBAAA+C,SAAA,CAAAhD,IAAA;oBAAAgD,SAAA,CAAAT,EAAA,GAAAS,SAAA;oBAEDZ,OAAO,CAACI,KAAK,CAAC,6BAA6B,EAAAQ,SAAA,CAAAT,EAAO,CAAC;oBACnDV,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,uBAAuB,CAAC;kBAAC;kBAAA;oBAAA,OAAAU,SAAA,CAAAlC,IAAA;gBAAA;cAAA,GAAA+B,QAAA;YAAA,CAEjD;YAAA,iBAAAQ,GAAA,EAAAC,GAAA;cAAA,OAAAV,KAAA,CAAA3D,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;;UAEF;UACAQ,GAAG,CAAC6D,IAAI,CAAC,aAAa;YAAA,IAAAC,KAAA,OAAArE,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAoE,SAAO7B,GAAG,EAAEC,GAAG;cAAA,IAAA6B,QAAA;cAAA,OAAAtE,YAAA,YAAAS,IAAA,UAAA8D,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAA5D,IAAA,GAAA4D,SAAA,CAAA3D,IAAA;kBAAA;oBAAA2D,SAAA,CAAA5D,IAAA;oBAE7B0D,QAAQ,GAAG9B,GAAG,CAACiC,IAAI;oBAAAD,SAAA,CAAA3D,IAAA;oBAAA,OACnBR,EAAE,CAACmB,UAAU,CAAC,QAAQ,CAAC,CAACkD,SAAS,CAACJ,QAAQ,CAAC;kBAAA;oBACjD7B,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,eAAe,CAAC;oBAACsB,SAAA,CAAA3D,IAAA;oBAAA;kBAAA;oBAAA2D,SAAA,CAAA5D,IAAA;oBAAA4D,SAAA,CAAArB,EAAA,GAAAqB,SAAA;oBAEtCxB,OAAO,CAACI,KAAK,CAAC,yBAAyB,EAAAoB,SAAA,CAAArB,EAAO,CAAC;oBAC/CV,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,uBAAuB,CAAC;kBAAC;kBAAA;oBAAA,OAAAsB,SAAA,CAAA9C,IAAA;gBAAA;cAAA,GAAA2C,QAAA;YAAA,CAEjD;YAAA,iBAAAM,GAAA,EAAAC,GAAA;cAAA,OAAAR,KAAA,CAAAvE,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;;UAEF;UACAQ,GAAG,CAACuE,GAAG,CAAC,oCAAoC;YAAA,IAAAC,KAAA,OAAA/E,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAA8E,SAAOvC,GAAG,EAAEC,GAAG;cAAA,IAAAuC,MAAA,EAAAlB,OAAA;cAAA,OAAA9D,YAAA,YAAAS,IAAA,UAAAwE,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAtE,IAAA,GAAAsE,SAAA,CAAArE,IAAA;kBAAA;oBAAAqE,SAAA,CAAAtE,IAAA;oBAEnDoE,MAAM,GAAGxC,GAAG,CAAC2C,MAAM,CAACH,MAAM;oBACxBlB,OAAO,GAAKtB,GAAG,CAACiC,IAAI,CAApBX,OAAO;oBAAAoB,SAAA,CAAArE,IAAA;oBAAA,OAETR,EAAE,CAACmB,UAAU,CAAC,OAAO,CAAC,CAAC4D,SAAS,CACpC;sBAAE7D,EAAE,EAAEyD;oBAAO,CAAC,EACd;sBACEK,SAAS,EAAE;wBAAEC,eAAe,EAAExB;sBAAQ,CAAC,CAAE;oBAC3C,CACF,CAAC;kBAAA;oBAEDrB,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,0BAA0B,CAAC;oBAACgC,SAAA,CAAArE,IAAA;oBAAA;kBAAA;oBAAAqE,SAAA,CAAAtE,IAAA;oBAAAsE,SAAA,CAAA/B,EAAA,GAAA+B,SAAA;oBAEjDlC,OAAO,CAACI,KAAK,CAAC,oCAAoC,EAAA8B,SAAA,CAAA/B,EAAO,CAAC;oBAC1DV,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,uBAAuB,CAAC;kBAAC;kBAAA;oBAAA,OAAAgC,SAAA,CAAAxD,IAAA;gBAAA;cAAA,GAAAqD,QAAA;YAAA,CAEjD;YAAA,iBAAAQ,GAAA,EAAAC,GAAA;cAAA,OAAAV,KAAA,CAAAjF,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;;UAEF;UACAQ,GAAG,CAAC+B,GAAG,CAAC,eAAe;YAAA,IAAAoD,KAAA,OAAA1F,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAyF,SAAOlD,GAAG,EAAEC,GAAG;cAAA,IAAAkD,QAAA;cAAA,OAAA3F,YAAA,YAAAS,IAAA,UAAAmF,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAjF,IAAA,GAAAiF,SAAA,CAAAhF,IAAA;kBAAA;oBAAAgF,SAAA,CAAAhF,IAAA;oBAAA,OACfR,EAAE,CAACmB,UAAU,CAAC,UAAU,CAAC,CAACqB,IAAI,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;kBAAA;oBAA7D6C,QAAQ,GAAAE,SAAA,CAAA9C,IAAA;oBACdN,GAAG,CAACS,IAAI,CAACyC,QAAQ,CAAC;kBAAC;kBAAA;oBAAA,OAAAE,SAAA,CAAAnE,IAAA;gBAAA;cAAA,GAAAgE,QAAA;YAAA,CACpB;YAAA,iBAAAI,IAAA,EAAAC,IAAA;cAAA,OAAAN,KAAA,CAAA5F,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;UAEFQ,GAAG,CAAC+B,GAAG,CAAC,yBAAyB;YAAA,IAAA2D,KAAA,OAAAjG,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAgG,SAAOzD,GAAG,EAAEC,GAAG;cAAA,IAAAyD,IAAA,EAAAC,aAAA;cAAA,OAAAnG,YAAA,YAAAS,IAAA,UAAA2F,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAzF,IAAA,GAAAyF,SAAA,CAAAxF,IAAA;kBAAA;oBAAAwF,SAAA,CAAAxF,IAAA;oBAAA,OAC7BR,EAAE,CAClBmB,UAAU,CAAC,OAAO,CAAC,CACnBC,OAAO,CAAC;sBAAEF,EAAE,EAAEiB,GAAG,CAAC2C,MAAM,CAACH;oBAAO,CAAC,CAAC;kBAAA;oBAF/BkB,IAAI,GAAAG,SAAA,CAAAtD,IAAA;oBAAAsD,SAAA,CAAAxF,IAAA;oBAAA,OAGkBN,gBAAgB,CAAC,CAAA2F,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,SAAS,KAAI,EAAE,CAAC;kBAAA;oBAA7DH,aAAa,GAAAE,SAAA,CAAAtD,IAAA;oBAAkD;oBACrEN,GAAG,CAACR,IAAI,CAACkE,aAAa,CAAC;kBAAC;kBAAA;oBAAA,OAAAE,SAAA,CAAA3E,IAAA;gBAAA;cAAA,GAAAuE,QAAA;YAAA,CACzB;YAAA,iBAAAM,IAAA,EAAAC,IAAA;cAAA,OAAAR,KAAA,CAAAnG,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;UAEFQ,GAAG,CAAC+B,GAAG,CAAC,yBAAyB;YAAA,IAAAoE,KAAA,OAAA1G,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAyG,SAAOlE,GAAG,EAAEC,GAAG;cAAA,IAAAkE,SAAA,EAAAC,OAAA;cAAA,OAAA5G,YAAA,YAAAS,IAAA,UAAAoG,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAlG,IAAA,GAAAkG,SAAA,CAAAjG,IAAA;kBAAA;oBAC1C8F,SAAS,GAAGnE,GAAG,CAAC2C,MAAM,CAACwB,SAAS;oBAAAG,SAAA,CAAAjG,IAAA;oBAAA,OAChBR,EAAE,CAACmB,UAAU,CAAC,UAAU,CAAC,CAACC,OAAO,CAAC;sBAAEF,EAAE,EAAEoF;oBAAU,CAAC,CAAC;kBAAA;oBAApEC,OAAO,GAAAE,SAAA,CAAA/D,IAAA;oBACbN,GAAG,CAACR,IAAI,CAAC2E,OAAO,CAAC;kBAAC;kBAAA;oBAAA,OAAAE,SAAA,CAAApF,IAAA;gBAAA;cAAA,GAAAgF,QAAA;YAAA,CACnB;YAAA,iBAAAK,IAAA,EAAAC,IAAA;cAAA,OAAAP,KAAA,CAAA5G,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;;UAEF;UACAQ,GAAG,CAAC6D,IAAI,CAAC,yBAAyB;YAAA,IAAA8C,KAAA,OAAAlH,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAiH,SAAO1E,GAAG,EAAEC,GAAG;cAAA,IAAAuC,MAAA,EAAA2B,SAAA,EAAAQ,YAAA,EAAAjB,IAAA,EAAAC,aAAA;cAAA,OAAAnG,YAAA,YAAAS,IAAA,UAAA2G,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAzG,IAAA,GAAAyG,SAAA,CAAAxG,IAAA;kBAAA;oBAC3CmE,MAAM,GAAGxC,GAAG,CAAC2C,MAAM,CAACH,MAAM;oBAC1B2B,SAAS,GAAGnE,GAAG,CAACiC,IAAI,CAAClD,EAAE;oBAAA8F,SAAA,CAAAxG,IAAA;oBAAA,OAEFR,EAAE,CAACmB,UAAU,CAAC,OAAO,CAAC,CAACC,OAAO,CAAC;sBAAEF,EAAE,EAAEyD;oBAAO,CAAC,CAAC;kBAAA;oBAAnEmC,YAAY,GAAAE,SAAA,CAAAtE,IAAA;oBAAA,IAEboE,YAAY;sBAAAE,SAAA,CAAAxG,IAAA;sBAAA;oBAAA;oBAAAwG,SAAA,CAAAxG,IAAA;oBAAA,OACTR,EAAE,CAACmB,UAAU,CAAC,OAAO,CAAC,CAACkD,SAAS,CAAC;sBAAEnD,EAAE,EAAEyD,MAAM;sBAAEsB,SAAS,EAAE;oBAAG,CAAC,CAAC;kBAAA;oBAAAe,SAAA,CAAAxG,IAAA;oBAAA,OAGjER,EAAE,CAACmB,UAAU,CAAC,OAAO,CAAC,CAAC4D,SAAS,CACpC;sBAAE7D,EAAE,EAAEyD;oBAAO,CAAC,EACd;sBACEK,SAAS,EAAE;wBAAEiB,SAAS,EAAEK;sBAAU,CAAC,CAAE;oBACvC,CACF,CAAC;kBAAA;oBAAAU,SAAA,CAAAxG,IAAA;oBAAA,OACkBR,EAAE,CAClBmB,UAAU,CAAC,OAAO,CAAC,CACnBC,OAAO,CAAC;sBAAEF,EAAE,EAAEiB,GAAG,CAAC2C,MAAM,CAACH;oBAAO,CAAC,CAAC;kBAAA;oBAF/BkB,IAAI,GAAAmB,SAAA,CAAAtE,IAAA;oBAAAsE,SAAA,CAAAxG,IAAA;oBAAA,OAGkBN,gBAAgB,CAAC,CAAA2F,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,SAAS,KAAI,EAAE,CAAC;kBAAA;oBAA7DH,aAAa,GAAAkB,SAAA,CAAAtE,IAAA;oBAAkD;oBACrEN,GAAG,CAACR,IAAI,CAACkE,aAAa,CAAC;kBAAC;kBAAA;oBAAA,OAAAkB,SAAA,CAAA3F,IAAA;gBAAA;cAAA,GAAAwF,QAAA;YAAA,CACzB;YAAA,iBAAAI,IAAA,EAAAC,IAAA;cAAA,OAAAN,KAAA,CAAApH,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;;UAEF;UACAQ,GAAG,UAAO,CAAC,oCAAoC;YAAA,IAAAkH,KAAA,OAAAzH,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAwH,SAAOjF,GAAG,EAAEC,GAAG;cAAA,IAAAuC,MAAA,EAAA2B,SAAA,EAAAT,IAAA,EAAAC,aAAA;cAAA,OAAAnG,YAAA,YAAAS,IAAA,UAAAiH,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAA/G,IAAA,GAAA+G,SAAA,CAAA9G,IAAA;kBAAA;oBACxDmE,MAAM,GAAGxC,GAAG,CAAC2C,MAAM,CAACH,MAAM;oBAC1B2B,SAAS,GAAGnE,GAAG,CAAC2C,MAAM,CAACwB,SAAS;oBAAAgB,SAAA,CAAA9G,IAAA;oBAAA,OAChCR,EAAE,CAACmB,UAAU,CAAC,OAAO,CAAC,CAAC4D,SAAS,CACpC;sBAAE7D,EAAE,EAAEyD;oBAAO,CAAC,EACd;sBACE4C,KAAK,EAAE;wBAAEtB,SAAS,EAAEK;sBAAU;oBAChC,CACF,CAAC;kBAAA;oBAAAgB,SAAA,CAAA9G,IAAA;oBAAA,OACkBR,EAAE,CAClBmB,UAAU,CAAC,OAAO,CAAC,CACnBC,OAAO,CAAC;sBAAEF,EAAE,EAAEiB,GAAG,CAAC2C,MAAM,CAACH;oBAAO,CAAC,CAAC;kBAAA;oBAF/BkB,IAAI,GAAAyB,SAAA,CAAA5E,IAAA;oBAAA4E,SAAA,CAAA9G,IAAA;oBAAA,OAGkBN,gBAAgB,CAAC,CAAA2F,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,SAAS,KAAI,EAAE,CAAC;kBAAA;oBAA7DH,aAAa,GAAAwB,SAAA,CAAA5E,IAAA;oBAAkD;oBACrEN,GAAG,CAACR,IAAI,CAACkE,aAAa,CAAC;kBAAC;kBAAA;oBAAA,OAAAwB,SAAA,CAAAjG,IAAA;gBAAA;cAAA,GAAA+F,QAAA;YAAA,CACzB;YAAA,iBAAAI,IAAA,EAAAC,IAAA;cAAA,OAAAN,KAAA,CAAA3H,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;UAEFQ,GAAG,CAACyH,MAAM,CAAC,IAAI,EAAE,YAAM;YACrB/E,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;UACjD,CAAC,CAAC;QAAC;QAAA;UAAA,OAAAtC,UAAA,CAAAe,IAAA;MAAA;IAAA,GAAAxB,SAAA;EAAA,CACJ;EAAA,OAAAN,MAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAEDH,KAAK,CAAC,CAAC","ignoreList":[]}},"mtime":1717313556343}}
=======
{"{\"assumptions\":{},\"sourceRoot\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end\",\"filename\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _mongodb = require(\"mongodb\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _express = _interopRequireDefault(require(\"express\"));\n// Connect MongoDB when the server is started\nfunction start() {\n  return _start.apply(this, arguments);\n}\nfunction _start() {\n  _start = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee14() {\n    var mongodbURL, client, db, app, populatedCartIds, _populatedCartIds;\n    return _regenerator[\"default\"].wrap(function _callee14$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          _populatedCartIds = function _populatedCartIds3() {\n            _populatedCartIds = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee13(ids) {\n              return _regenerator[\"default\"].wrap(function _callee13$(_context13) {\n                while (1) switch (_context13.prev = _context13.next) {\n                  case 0:\n                    return _context13.abrupt(\"return\", Promise.all(ids.map(function (id) {\n                      return db.collection(\"products\").findOne({\n                        id: id\n                      });\n                    }) // Equivalent to using map() in API calling level\n                    ));\n                  case 1:\n                  case \"end\":\n                    return _context13.stop();\n                }\n              }, _callee13);\n            }));\n            return _populatedCartIds.apply(this, arguments);\n          };\n          populatedCartIds = function _populatedCartIds2(_x) {\n            return _populatedCartIds.apply(this, arguments);\n          };\n          mongodbURL = \"mongodb+srv://vaultpixel-db:769s46jD1a2fLPNK@database1.sqf5wlh.mongodb.net/?retryWrites=true&w=majority&appName=Database1\";\n          client = new _mongodb.MongoClient(mongodbURL);\n          _context14.next = 6;\n          return client.connect();\n        case 6:\n          db = client.db(\"vaultpixel-db\");\n          app = (0, _express[\"default\"])();\n          app.use(_express[\"default\"].json());\n          app.use(\"/images\", _express[\"default\"][\"static\"](_path[\"default\"].join(__dirname, \"../assets/wallets\"))); // Enable Express server to serve images for the front-end\n\n          // ------ Read items in the database using app.get() call back\n\n          // Get all orders from orders table\n          app.get(\"/api/orders\", /*#__PURE__*/function () {\n            var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n              var orders;\n              return _regenerator[\"default\"].wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return db.collection(\"orders\").find({}).toArray();\n                  case 3:\n                    orders = _context.sent;\n                    console.log(\"Orders fetched from database:\", orders);\n                    res.send(orders);\n                    _context.next = 12;\n                    break;\n                  case 8:\n                    _context.prev = 8;\n                    _context.t0 = _context[\"catch\"](0);\n                    console.error(\"Failed to fetch orders:\", _context.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 12:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee, null, [[0, 8]]);\n            }));\n            return function (_x2, _x3) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n\n          // Get the last order from orders table\n          app.get(\"/api/orders/last\", /*#__PURE__*/function () {\n            var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n              var lastOrder;\n              return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n                    _context2.next = 3;\n                    return db.collection(\"orders\").find({}).sort({\n                      orderId: -1\n                    }).limit(1).toArray();\n                  case 3:\n                    lastOrder = _context2.sent;\n                    if (lastOrder.length === 0) {\n                      res.status(404).send(\"No orders found\");\n                    } else {\n                      res.send(lastOrder[0]);\n                    }\n                    _context2.next = 11;\n                    break;\n                  case 7:\n                    _context2.prev = 7;\n                    _context2.t0 = _context2[\"catch\"](0);\n                    console.error(\"Failed to fetch last order:\", _context2.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 11:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2, null, [[0, 7]]);\n            }));\n            return function (_x4, _x5) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n\n          // Post a new order into orders table\n          app.post(\"/api/orders\", /*#__PURE__*/function () {\n            var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res) {\n              var newOrder;\n              return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    newOrder = req.body;\n                    _context3.next = 4;\n                    return db.collection(\"orders\").insertOne(newOrder);\n                  case 4:\n                    res.status(201).send(\"Order created\");\n                    _context3.next = 11;\n                    break;\n                  case 7:\n                    _context3.prev = 7;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    console.error(\"Failed to create order:\", _context3.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 11:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }, _callee3, null, [[0, 7]]);\n            }));\n            return function (_x6, _x7) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n\n          // Update user's purchasedOrders list\n          app.put(\"/api/users/:userId/purchasedOrders\", /*#__PURE__*/function () {\n            var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n              var userId, orderId;\n              return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n                while (1) switch (_context4.prev = _context4.next) {\n                  case 0:\n                    _context4.prev = 0;\n                    userId = req.params.userId;\n                    orderId = req.body.orderId;\n                    _context4.next = 5;\n                    return db.collection(\"users\").updateOne({\n                      id: userId\n                    }, {\n                      $addToSet: {\n                        purchasedOrders: orderId\n                      } // $addToSet prevents duplicates\n                    });\n                  case 5:\n                    res.status(200).send(\"Purchased orders updated\");\n                    _context4.next = 12;\n                    break;\n                  case 8:\n                    _context4.prev = 8;\n                    _context4.t0 = _context4[\"catch\"](0);\n                    console.error(\"Failed to update purchased orders:\", _context4.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 12:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }, _callee4, null, [[0, 8]]);\n            }));\n            return function (_x8, _x9) {\n              return _ref4.apply(this, arguments);\n            };\n          }());\n\n          // Get a specific order by orderId\n          app.get(\"/api/payment/:orderId\", /*#__PURE__*/function () {\n            var _ref5 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res) {\n              var orderId, order;\n              return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.prev = 0;\n                    orderId = parseInt(req.params.orderId); // Convert orderId to integer if stored as integer in MongoDB\n                    _context5.next = 4;\n                    return db.collection(\"orders\").findOne({\n                      orderId: orderId\n                    });\n                  case 4:\n                    order = _context5.sent;\n                    if (!order) {\n                      res.status(404).send(\"Order not found\");\n                    } else {\n                      res.json(order);\n                    }\n                    _context5.next = 12;\n                    break;\n                  case 8:\n                    _context5.prev = 8;\n                    _context5.t0 = _context5[\"catch\"](0);\n                    console.error(\"Failed to fetch order:\", _context5.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 12:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }, _callee5, null, [[0, 8]]);\n            }));\n            return function (_x10, _x11) {\n              return _ref5.apply(this, arguments);\n            };\n          }());\n\n          // PUT endpoint to update order\n          app.put(\"/api/orders/:orderId/update\", /*#__PURE__*/function () {\n            var _ref6 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n              var orderId, _req$body, address, paymentDetails, orderStatus, result;\n              return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n                while (1) switch (_context6.prev = _context6.next) {\n                  case 0:\n                    orderId = parseInt(req.params.orderId);\n                    _req$body = req.body, address = _req$body.address, paymentDetails = _req$body.paymentDetails, orderStatus = _req$body.orderStatus;\n                    _context6.prev = 2;\n                    _context6.next = 5;\n                    return db.collection(\"orders\").updateOne({\n                      orderId: orderId\n                    }, {\n                      $set: {\n                        address: address,\n                        paymentDetails: paymentDetails,\n                        orderStatus: orderStatus\n                      }\n                    });\n                  case 5:\n                    result = _context6.sent;\n                    if (result.modifiedCount === 0) {\n                      res.status(404).send(\"Order not found\");\n                    } else {\n                      res.status(200).send(\"Order updated\");\n                    }\n                    _context6.next = 13;\n                    break;\n                  case 9:\n                    _context6.prev = 9;\n                    _context6.t0 = _context6[\"catch\"](2);\n                    console.error(\"Failed to update order:\", _context6.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 13:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }, _callee6, null, [[2, 9]]);\n            }));\n            return function (_x12, _x13) {\n              return _ref6.apply(this, arguments);\n            };\n          }());\n\n          // Get all orders for a specific user\n          app.get(\"/api/orders/user/:userId\", /*#__PURE__*/function () {\n            var _ref7 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(req, res) {\n              var userId, orders;\n              return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n                while (1) switch (_context7.prev = _context7.next) {\n                  case 0:\n                    _context7.prev = 0;\n                    userId = req.params.userId;\n                    _context7.next = 4;\n                    return db.collection(\"orders\").find({\n                      userId: userId\n                    }).toArray();\n                  case 4:\n                    orders = _context7.sent;\n                    if (orders.length === 0) {\n                      res.status(404).send(\"No orders found for this user.\");\n                    } else {\n                      res.status(200).json(orders);\n                    }\n                    _context7.next = 12;\n                    break;\n                  case 8:\n                    _context7.prev = 8;\n                    _context7.t0 = _context7[\"catch\"](0);\n                    console.error(\"Failed to fetch orders for user:\", _context7.t0);\n                    res.status(500).send(\"Internal Server Error\");\n                  case 12:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }, _callee7, null, [[0, 8]]);\n            }));\n            return function (_x14, _x15) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n\n          // ------------------------ end of orders ------------------------\n          // Get products from products table\n          app.get(\"/api/products\", /*#__PURE__*/function () {\n            var _ref8 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(req, res) {\n              var products;\n              return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n                while (1) switch (_context8.prev = _context8.next) {\n                  case 0:\n                    _context8.next = 2;\n                    return db.collection(\"products\").find({}).toArray();\n                  case 2:\n                    products = _context8.sent;\n                    res.send(products);\n                  case 4:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }, _callee8);\n            }));\n            return function (_x16, _x17) {\n              return _ref8.apply(this, arguments);\n            };\n          }());\n          app.get(\"/api/users/:userId/cart\", /*#__PURE__*/function () {\n            var _ref9 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(req, res) {\n              var user, populatedCart;\n              return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n                while (1) switch (_context9.prev = _context9.next) {\n                  case 0:\n                    _context9.next = 2;\n                    return db.collection(\"users\").findOne({\n                      id: req.params.userId\n                    });\n                  case 2:\n                    user = _context9.sent;\n                    _context9.next = 5;\n                    return populatedCartIds((user === null || user === void 0 ? void 0 : user.cartItems) || []);\n                  case 5:\n                    populatedCart = _context9.sent;\n                    // passing cartItems as ids argument\n                    res.json(populatedCart);\n                  case 7:\n                  case \"end\":\n                    return _context9.stop();\n                }\n              }, _callee9);\n            }));\n            return function (_x18, _x19) {\n              return _ref9.apply(this, arguments);\n            };\n          }());\n          app.get(\"/api/product/:productId\", /*#__PURE__*/function () {\n            var _ref10 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(req, res) {\n              var productId, product;\n              return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n                while (1) switch (_context10.prev = _context10.next) {\n                  case 0:\n                    productId = req.params.productId;\n                    console.log(\"productId :\", (0, _typeof2[\"default\"])(productId), productId);\n                    _context10.next = 4;\n                    return db.collection(\"products\").findOne({\n                      id: productId\n                    });\n                  case 4:\n                    product = _context10.sent;\n                    res.json(product);\n                  case 6:\n                  case \"end\":\n                    return _context10.stop();\n                }\n              }, _callee10);\n            }));\n            return function (_x20, _x21) {\n              return _ref10.apply(this, arguments);\n            };\n          }());\n\n          // ------ Add item to cart w/ POST callback function\n          app.post(\"/api/users/:userId/cart\", /*#__PURE__*/function () {\n            var _ref11 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee11(req, res) {\n              var userId, productId, existingUser, user, populatedCart;\n              return _regenerator[\"default\"].wrap(function _callee11$(_context11) {\n                while (1) switch (_context11.prev = _context11.next) {\n                  case 0:\n                    userId = req.params.userId;\n                    productId = req.body.id;\n                    _context11.next = 4;\n                    return db.collection(\"users\").findOne({\n                      id: userId\n                    });\n                  case 4:\n                    existingUser = _context11.sent;\n                    if (existingUser) {\n                      _context11.next = 8;\n                      break;\n                    }\n                    _context11.next = 8;\n                    return db.collection(\"users\").insertOne({\n                      id: userId,\n                      cartItems: []\n                    });\n                  case 8:\n                    _context11.next = 10;\n                    return db.collection(\"users\").updateOne({\n                      id: userId\n                    }, {\n                      $addToSet: {\n                        cartItems: productId\n                      } // $addToSet doesn't add duplicate items like $push\n                    });\n                  case 10:\n                    _context11.next = 12;\n                    return db.collection(\"users\").findOne({\n                      id: req.params.userId\n                    });\n                  case 12:\n                    user = _context11.sent;\n                    _context11.next = 15;\n                    return populatedCartIds((user === null || user === void 0 ? void 0 : user.cartItems) || []);\n                  case 15:\n                    populatedCart = _context11.sent;\n                    // passing cartItems as ids argument\n                    res.json(populatedCart);\n                  case 17:\n                  case \"end\":\n                    return _context11.stop();\n                }\n              }, _callee11);\n            }));\n            return function (_x22, _x23) {\n              return _ref11.apply(this, arguments);\n            };\n          }());\n\n          // ------ Remove item from cart w/ DELETE callback function\n          app[\"delete\"](\"/api/users/:userId/cart/:productId\", /*#__PURE__*/function () {\n            var _ref12 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee12(req, res) {\n              var userId, productId, user, populatedCart;\n              return _regenerator[\"default\"].wrap(function _callee12$(_context12) {\n                while (1) switch (_context12.prev = _context12.next) {\n                  case 0:\n                    userId = req.params.userId;\n                    productId = req.params.productId;\n                    _context12.next = 4;\n                    return db.collection(\"users\").updateOne({\n                      id: userId\n                    }, {\n                      $pull: {\n                        cartItems: productId\n                      }\n                    });\n                  case 4:\n                    _context12.next = 6;\n                    return db.collection(\"users\").findOne({\n                      id: req.params.userId\n                    });\n                  case 6:\n                    user = _context12.sent;\n                    _context12.next = 9;\n                    return populatedCartIds((user === null || user === void 0 ? void 0 : user.cartItems) || []);\n                  case 9:\n                    populatedCart = _context12.sent;\n                    // passing cartItems as ids argument\n                    res.json(populatedCart);\n                  case 11:\n                  case \"end\":\n                    return _context12.stop();\n                }\n              }, _callee12);\n            }));\n            return function (_x24, _x25) {\n              return _ref12.apply(this, arguments);\n            };\n          }());\n          app.listen(8000, function () {\n            console.log(\"Server is listening on port 8000\");\n          });\n        case 23:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee14);\n  }));\n  return _start.apply(this, arguments);\n}\nstart();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29kYiIsInJlcXVpcmUiLCJfcGF0aCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzcyIsInN0YXJ0IiwiX3N0YXJ0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZTE0IiwibW9uZ29kYlVSTCIsImNsaWVudCIsImRiIiwiYXBwIiwicG9wdWxhdGVkQ2FydElkcyIsIl9wb3B1bGF0ZWRDYXJ0SWRzIiwid3JhcCIsIl9jYWxsZWUxNCQiLCJfY29udGV4dDE0IiwicHJldiIsIm5leHQiLCJfcG9wdWxhdGVkQ2FydElkczMiLCJfY2FsbGVlMTMiLCJpZHMiLCJfY2FsbGVlMTMkIiwiX2NvbnRleHQxMyIsImFicnVwdCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpZCIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwic3RvcCIsIl9wb3B1bGF0ZWRDYXJ0SWRzMiIsIl94IiwiTW9uZ29DbGllbnQiLCJjb25uZWN0IiwiZXhwcmVzcyIsInVzZSIsImpzb24iLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImdldCIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwib3JkZXJzIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsImZpbmQiLCJ0b0FycmF5Iiwic2VudCIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwidDAiLCJlcnJvciIsInN0YXR1cyIsIl94MiIsIl94MyIsIl9yZWYyIiwiX2NhbGxlZTIiLCJsYXN0T3JkZXIiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJzb3J0Iiwib3JkZXJJZCIsImxpbWl0IiwibGVuZ3RoIiwiX3g0IiwiX3g1IiwicG9zdCIsIl9yZWYzIiwiX2NhbGxlZTMiLCJuZXdPcmRlciIsIl9jYWxsZWUzJCIsIl9jb250ZXh0MyIsImJvZHkiLCJpbnNlcnRPbmUiLCJfeDYiLCJfeDciLCJwdXQiLCJfcmVmNCIsIl9jYWxsZWU0IiwidXNlcklkIiwiX2NhbGxlZTQkIiwiX2NvbnRleHQ0IiwicGFyYW1zIiwidXBkYXRlT25lIiwiJGFkZFRvU2V0IiwicHVyY2hhc2VkT3JkZXJzIiwiX3g4IiwiX3g5IiwiX3JlZjUiLCJfY2FsbGVlNSIsIm9yZGVyIiwiX2NhbGxlZTUkIiwiX2NvbnRleHQ1IiwicGFyc2VJbnQiLCJfeDEwIiwiX3gxMSIsIl9yZWY2IiwiX2NhbGxlZTYiLCJfcmVxJGJvZHkiLCJhZGRyZXNzIiwicGF5bWVudERldGFpbHMiLCJvcmRlclN0YXR1cyIsInJlc3VsdCIsIl9jYWxsZWU2JCIsIl9jb250ZXh0NiIsIiRzZXQiLCJtb2RpZmllZENvdW50IiwiX3gxMiIsIl94MTMiLCJfcmVmNyIsIl9jYWxsZWU3IiwiX2NhbGxlZTckIiwiX2NvbnRleHQ3IiwiX3gxNCIsIl94MTUiLCJfcmVmOCIsIl9jYWxsZWU4IiwicHJvZHVjdHMiLCJfY2FsbGVlOCQiLCJfY29udGV4dDgiLCJfeDE2IiwiX3gxNyIsIl9yZWY5IiwiX2NhbGxlZTkiLCJ1c2VyIiwicG9wdWxhdGVkQ2FydCIsIl9jYWxsZWU5JCIsIl9jb250ZXh0OSIsImNhcnRJdGVtcyIsIl94MTgiLCJfeDE5IiwiX3JlZjEwIiwiX2NhbGxlZTEwIiwicHJvZHVjdElkIiwicHJvZHVjdCIsIl9jYWxsZWUxMCQiLCJfY29udGV4dDEwIiwiX3R5cGVvZjIiLCJfeDIwIiwiX3gyMSIsIl9yZWYxMSIsIl9jYWxsZWUxMSIsImV4aXN0aW5nVXNlciIsIl9jYWxsZWUxMSQiLCJfY29udGV4dDExIiwiX3gyMiIsIl94MjMiLCJfcmVmMTIiLCJfY2FsbGVlMTIiLCJfY2FsbGVlMTIkIiwiX2NvbnRleHQxMiIsIiRwdWxsIiwiX3gyNCIsIl94MjUiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9iaWxsLm0vRGVza3RvcC9tYXN0ZXIvU3dpbmJ1cm5lL3ZhdWx0LXBpeGVsL2JhY2stZW5kL3NyYy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gXCJtb25nb2RiXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuLy8gQ29ubmVjdCBNb25nb0RCIHdoZW4gdGhlIHNlcnZlciBpcyBzdGFydGVkXG5hc3luYyBmdW5jdGlvbiBzdGFydCgpIHtcbiAgY29uc3QgbW9uZ29kYlVSTCA9IGBtb25nb2RiK3NydjovL3ZhdWx0cGl4ZWwtZGI6NzY5czQ2akQxYTJmTFBOS0BkYXRhYmFzZTEuc3FmNXdsaC5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JmFwcE5hbWU9RGF0YWJhc2UxYDtcbiAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KG1vbmdvZGJVUkwpO1xuXG4gIGF3YWl0IGNsaWVudC5jb25uZWN0KCk7XG4gIGNvbnN0IGRiID0gY2xpZW50LmRiKFwidmF1bHRwaXhlbC1kYlwiKTtcblxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gIGFwcC51c2UoXCIvaW1hZ2VzXCIsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vYXNzZXRzL3dhbGxldHNcIikpKTsgLy8gRW5hYmxlIEV4cHJlc3Mgc2VydmVyIHRvIHNlcnZlIGltYWdlcyBmb3IgdGhlIGZyb250LWVuZFxuXG4gIGFzeW5jIGZ1bmN0aW9uIHBvcHVsYXRlZENhcnRJZHMoaWRzKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgaWRzLm1hcCgoaWQpID0+IGRiLmNvbGxlY3Rpb24oXCJwcm9kdWN0c1wiKS5maW5kT25lKHsgaWQgfSkpIC8vIEVxdWl2YWxlbnQgdG8gdXNpbmcgbWFwKCkgaW4gQVBJIGNhbGxpbmcgbGV2ZWxcbiAgICApO1xuICB9XG5cbiAgLy8gLS0tLS0tIFJlYWQgaXRlbXMgaW4gdGhlIGRhdGFiYXNlIHVzaW5nIGFwcC5nZXQoKSBjYWxsIGJhY2tcblxuICAvLyBHZXQgYWxsIG9yZGVycyBmcm9tIG9yZGVycyB0YWJsZVxuICBhcHAuZ2V0KFwiL2FwaS9vcmRlcnNcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJvcmRlcnNcIikuZmluZCh7fSkudG9BcnJheSgpO1xuICAgICAgY29uc29sZS5sb2coXCJPcmRlcnMgZmV0Y2hlZCBmcm9tIGRhdGFiYXNlOlwiLCBvcmRlcnMpO1xuICAgICAgcmVzLnNlbmQob3JkZXJzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBvcmRlcnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gR2V0IHRoZSBsYXN0IG9yZGVyIGZyb20gb3JkZXJzIHRhYmxlXG4gIGFwcC5nZXQoXCIvYXBpL29yZGVycy9sYXN0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBsYXN0T3JkZXIgPSBhd2FpdCBkYlxuICAgICAgICAuY29sbGVjdGlvbihcIm9yZGVyc1wiKVxuICAgICAgICAuZmluZCh7fSlcbiAgICAgICAgLnNvcnQoeyBvcmRlcklkOiAtMSB9KVxuICAgICAgICAubGltaXQoMSlcbiAgICAgICAgLnRvQXJyYXkoKTtcbiAgICAgIGlmIChsYXN0T3JkZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiTm8gb3JkZXJzIGZvdW5kXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLnNlbmQobGFzdE9yZGVyWzBdKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBsYXN0IG9yZGVyOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIkludGVybmFsIFNlcnZlciBFcnJvclwiKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFBvc3QgYSBuZXcgb3JkZXIgaW50byBvcmRlcnMgdGFibGVcbiAgYXBwLnBvc3QoXCIvYXBpL29yZGVyc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbmV3T3JkZXIgPSByZXEuYm9keTtcbiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJvcmRlcnNcIikuaW5zZXJ0T25lKG5ld09yZGVyKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKFwiT3JkZXIgY3JlYXRlZFwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgb3JkZXI6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVXBkYXRlIHVzZXIncyBwdXJjaGFzZWRPcmRlcnMgbGlzdFxuICBhcHAucHV0KFwiL2FwaS91c2Vycy86dXNlcklkL3B1cmNoYXNlZE9yZGVyc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnBhcmFtcy51c2VySWQ7XG4gICAgICBjb25zdCB7IG9yZGVySWQgfSA9IHJlcS5ib2R5O1xuXG4gICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKFxuICAgICAgICB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAge1xuICAgICAgICAgICRhZGRUb1NldDogeyBwdXJjaGFzZWRPcmRlcnM6IG9yZGVySWQgfSwgLy8gJGFkZFRvU2V0IHByZXZlbnRzIGR1cGxpY2F0ZXNcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoXCJQdXJjaGFzZWQgb3JkZXJzIHVwZGF0ZWRcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHB1cmNoYXNlZCBvcmRlcnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gR2V0IGEgc3BlY2lmaWMgb3JkZXIgYnkgb3JkZXJJZFxuICBhcHAuZ2V0KFwiL2FwaS9wYXltZW50LzpvcmRlcklkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmRlcklkID0gcGFyc2VJbnQocmVxLnBhcmFtcy5vcmRlcklkKTsgLy8gQ29udmVydCBvcmRlcklkIHRvIGludGVnZXIgaWYgc3RvcmVkIGFzIGludGVnZXIgaW4gTW9uZ29EQlxuICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwib3JkZXJzXCIpLmZpbmRPbmUoeyBvcmRlcklkIH0pO1xuICAgICAgaWYgKCFvcmRlcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZChcIk9yZGVyIG5vdCBmb3VuZFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5qc29uKG9yZGVyKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBvcmRlcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBQVVQgZW5kcG9pbnQgdG8gdXBkYXRlIG9yZGVyXG4gIGFwcC5wdXQoXCIvYXBpL29yZGVycy86b3JkZXJJZC91cGRhdGVcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJJZCA9IHBhcnNlSW50KHJlcS5wYXJhbXMub3JkZXJJZCk7XG4gICAgY29uc3QgeyBhZGRyZXNzLCBwYXltZW50RGV0YWlscywgb3JkZXJTdGF0dXMgfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJvcmRlcnNcIikudXBkYXRlT25lKFxuICAgICAgICB7IG9yZGVySWQ6IG9yZGVySWQgfSxcbiAgICAgICAge1xuICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3MsXG4gICAgICAgICAgICBwYXltZW50RGV0YWlsczogcGF5bWVudERldGFpbHMsXG4gICAgICAgICAgICBvcmRlclN0YXR1czogb3JkZXJTdGF0dXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiT3JkZXIgbm90IGZvdW5kXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoXCJPcmRlciB1cGRhdGVkXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBvcmRlcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBHZXQgYWxsIG9yZGVycyBmb3IgYSBzcGVjaWZpYyB1c2VyXG4gIGFwcC5nZXQoXCIvYXBpL29yZGVycy91c2VyLzp1c2VySWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS5wYXJhbXMudXNlcklkO1xuICAgICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgZGJcbiAgICAgICAgLmNvbGxlY3Rpb24oXCJvcmRlcnNcIilcbiAgICAgICAgLmZpbmQoeyB1c2VySWQ6IHVzZXJJZCB9KVxuICAgICAgICAudG9BcnJheSgpO1xuICAgICAgaWYgKG9yZGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoXCJObyBvcmRlcnMgZm91bmQgZm9yIHRoaXMgdXNlci5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihvcmRlcnMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIG9yZGVycyBmb3IgdXNlcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZW5kIG9mIG9yZGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gR2V0IHByb2R1Y3RzIGZyb20gcHJvZHVjdHMgdGFibGVcbiAgYXBwLmdldChcIi9hcGkvcHJvZHVjdHNcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwicHJvZHVjdHNcIikuZmluZCh7fSkudG9BcnJheSgpO1xuICAgIHJlcy5zZW5kKHByb2R1Y3RzKTtcbiAgfSk7XG5cbiAgYXBwLmdldChcIi9hcGkvdXNlcnMvOnVzZXJJZC9jYXJ0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgLmZpbmRPbmUoeyBpZDogcmVxLnBhcmFtcy51c2VySWQgfSk7XG4gICAgY29uc3QgcG9wdWxhdGVkQ2FydCA9IGF3YWl0IHBvcHVsYXRlZENhcnRJZHModXNlcj8uY2FydEl0ZW1zIHx8IFtdKTsgLy8gcGFzc2luZyBjYXJ0SXRlbXMgYXMgaWRzIGFyZ3VtZW50XG4gICAgcmVzLmpzb24ocG9wdWxhdGVkQ2FydCk7XG4gIH0pO1xuXG4gIGFwcC5nZXQoXCIvYXBpL3Byb2R1Y3QvOnByb2R1Y3RJZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLnByb2R1Y3RJZDtcbiAgICBjb25zb2xlLmxvZyhcInByb2R1Y3RJZCA6XCIsIHR5cGVvZiBwcm9kdWN0SWQsIHByb2R1Y3RJZCk7XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJwcm9kdWN0c1wiKS5maW5kT25lKHsgaWQ6IHByb2R1Y3RJZCB9KTtcbiAgICByZXMuanNvbihwcm9kdWN0KTtcbiAgfSk7XG5cbiAgLy8gLS0tLS0tIEFkZCBpdGVtIHRvIGNhcnQgdy8gUE9TVCBjYWxsYmFjayBmdW5jdGlvblxuICBhcHAucG9zdChcIi9hcGkvdXNlcnMvOnVzZXJJZC9jYXJ0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS5wYXJhbXMudXNlcklkO1xuICAgIGNvbnN0IHByb2R1Y3RJZCA9IHJlcS5ib2R5LmlkO1xuXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUoeyBpZDogdXNlcklkIH0pOyAvLyBpZCBpbiBNb25nb0JEJ3MgdXNlciBjb2xsZWN0aW9uIHRoYXQgaXMgZXF1YWwgdG8gdXNlcklkIGZyb20gZmlyZWJhc2VBdXRoXG5cbiAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmluc2VydE9uZSh7IGlkOiB1c2VySWQsIGNhcnRJdGVtczogW10gfSk7IC8vIElmIG5vdCB0aGVyZSBhbHJlYWR5LCBpbnNlcnQgaW50byB0aGUgY29sbGVjdGlvbi5cbiAgICB9XG5cbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKFxuICAgICAgeyBpZDogdXNlcklkIH0sXG4gICAgICB7XG4gICAgICAgICRhZGRUb1NldDogeyBjYXJ0SXRlbXM6IHByb2R1Y3RJZCB9LCAvLyAkYWRkVG9TZXQgZG9lc24ndCBhZGQgZHVwbGljYXRlIGl0ZW1zIGxpa2UgJHB1c2hcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgLmZpbmRPbmUoeyBpZDogcmVxLnBhcmFtcy51c2VySWQgfSk7XG4gICAgY29uc3QgcG9wdWxhdGVkQ2FydCA9IGF3YWl0IHBvcHVsYXRlZENhcnRJZHModXNlcj8uY2FydEl0ZW1zIHx8IFtdKTsgLy8gcGFzc2luZyBjYXJ0SXRlbXMgYXMgaWRzIGFyZ3VtZW50XG4gICAgcmVzLmpzb24ocG9wdWxhdGVkQ2FydCk7XG4gIH0pO1xuXG4gIC8vIC0tLS0tLSBSZW1vdmUgaXRlbSBmcm9tIGNhcnQgdy8gREVMRVRFIGNhbGxiYWNrIGZ1bmN0aW9uXG4gIGFwcC5kZWxldGUoXCIvYXBpL3VzZXJzLzp1c2VySWQvY2FydC86cHJvZHVjdElkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS5wYXJhbXMudXNlcklkO1xuICAgIGNvbnN0IHByb2R1Y3RJZCA9IHJlcS5wYXJhbXMucHJvZHVjdElkO1xuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUoXG4gICAgICB7IGlkOiB1c2VySWQgfSxcbiAgICAgIHtcbiAgICAgICAgJHB1bGw6IHsgY2FydEl0ZW1zOiBwcm9kdWN0SWQgfSxcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgLmZpbmRPbmUoeyBpZDogcmVxLnBhcmFtcy51c2VySWQgfSk7XG4gICAgY29uc3QgcG9wdWxhdGVkQ2FydCA9IGF3YWl0IHBvcHVsYXRlZENhcnRJZHModXNlcj8uY2FydEl0ZW1zIHx8IFtdKTsgLy8gcGFzc2luZyBjYXJ0SXRlbXMgYXMgaWRzIGFyZ3VtZW50XG4gICAgcmVzLmpzb24ocG9wdWxhdGVkQ2FydCk7XG4gIH0pO1xuXG4gIGFwcC5saXN0ZW4oODAwMCwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIGlzIGxpc3RlbmluZyBvbiBwb3J0IDgwMDBcIik7XG4gIH0pO1xufVxuXG5zdGFydCgpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFFQTtBQUFBLFNBQ2VJLEtBQUtBLENBQUE7RUFBQSxPQUFBQyxNQUFBLENBQUFDLEtBQUEsT0FBQUMsU0FBQTtBQUFBO0FBQUEsU0FBQUYsT0FBQTtFQUFBQSxNQUFBLE9BQUFHLGtCQUFBLDJCQUFBQyxZQUFBLFlBQUFDLElBQUEsQ0FBcEIsU0FBQUMsVUFBQTtJQUFBLElBQUFDLFVBQUEsRUFBQUMsTUFBQSxFQUFBQyxFQUFBLEVBQUFDLEdBQUEsRUFZaUJDLGdCQUFnQixFQUFBQyxpQkFBQTtJQUFBLE9BQUFSLFlBQUEsWUFBQVMsSUFBQSxVQUFBQyxXQUFBQyxVQUFBO01BQUEsa0JBQUFBLFVBQUEsQ0FBQUMsSUFBQSxHQUFBRCxVQUFBLENBQUFFLElBQUE7UUFBQTtVQUFBTCxpQkFBQSxZQUFBTSxtQkFBQTtZQUFBTixpQkFBQSxPQUFBVCxrQkFBQSwyQkFBQUMsWUFBQSxZQUFBQyxJQUFBLENBQS9CLFNBQUFjLFVBQWdDQyxHQUFHO2NBQUEsT0FBQWhCLFlBQUEsWUFBQVMsSUFBQSxVQUFBUSxXQUFBQyxVQUFBO2dCQUFBLGtCQUFBQSxVQUFBLENBQUFOLElB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","map":{"version":3,"names":["_mongodb","require","_path","_interopRequireDefault","_express","start","_start","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee14","mongodbURL","client","db","app","populatedCartIds","_populatedCartIds","wrap","_callee14$","_context14","prev","next","_populatedCartIds3","_callee13","ids","_callee13$","_context13","abrupt","Promise","all","map","id","collection","findOne","stop","_populatedCartIds2","_x","MongoClient","connect","express","use","json","path","join","__dirname","get","_ref","_callee","req","res","orders","_callee$","_context","find","toArray","sent","console","log","send","t0","error","status","_x2","_x3","_ref2","_callee2","lastOrder","_callee2$","_context2","sort","orderId","limit","length","_x4","_x5","post","_ref3","_callee3","newOrder","_callee3$","_context3","body","insertOne","_x6","_x7","put","_ref4","_callee4","userId","_callee4$","_context4","params","updateOne","$addToSet","purchasedOrders","_x8","_x9","_ref5","_callee5","order","_callee5$","_context5","parseInt","_x10","_x11","_ref6","_callee6","_req$body","address","paymentDetails","orderStatus","result","_callee6$","_context6","$set","modifiedCount","_x12","_x13","_ref7","_callee7","_callee7$","_context7","_x14","_x15","_ref8","_callee8","products","_callee8$","_context8","_x16","_x17","_ref9","_callee9","user","populatedCart","_callee9$","_context9","cartItems","_x18","_x19","_ref10","_callee10","productId","product","_callee10$","_context10","_typeof2","_x20","_x21","_ref11","_callee11","existingUser","_callee11$","_context11","_x22","_x23","_ref12","_callee12","_callee12$","_context12","$pull","_x24","_x25","listen"],"sourceRoot":"/Users/bill.m/Desktop/master/Swinburne/vault-pixel/back-end/src/","sources":["server.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\nimport path from \"path\";\nimport express from \"express\";\n\n// Connect MongoDB when the server is started\nasync function start() {\n  const mongodbURL = `mongodb+srv://vaultpixel-db:769s46jD1a2fLPNK@database1.sqf5wlh.mongodb.net/?retryWrites=true&w=majority&appName=Database1`;\n  const client = new MongoClient(mongodbURL);\n\n  await client.connect();\n  const db = client.db(\"vaultpixel-db\");\n\n  const app = express();\n\n  app.use(express.json());\n  app.use(\"/images\", express.static(path.join(__dirname, \"../assets/wallets\"))); // Enable Express server to serve images for the front-end\n\n  async function populatedCartIds(ids) {\n    return Promise.all(\n      ids.map((id) => db.collection(\"products\").findOne({ id })) // Equivalent to using map() in API calling level\n    );\n  }\n\n  // ------ Read items in the database using app.get() call back\n\n  // Get all orders from orders table\n  app.get(\"/api/orders\", async (req, res) => {\n    try {\n      const orders = await db.collection(\"orders\").find({}).toArray();\n      console.log(\"Orders fetched from database:\", orders);\n      res.send(orders);\n    } catch (error) {\n      console.error(\"Failed to fetch orders:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Get the last order from orders table\n  app.get(\"/api/orders/last\", async (req, res) => {\n    try {\n      const lastOrder = await db\n        .collection(\"orders\")\n        .find({})\n        .sort({ orderId: -1 })\n        .limit(1)\n        .toArray();\n      if (lastOrder.length === 0) {\n        res.status(404).send(\"No orders found\");\n      } else {\n        res.send(lastOrder[0]);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch last order:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Post a new order into orders table\n  app.post(\"/api/orders\", async (req, res) => {\n    try {\n      const newOrder = req.body;\n      await db.collection(\"orders\").insertOne(newOrder);\n      res.status(201).send(\"Order created\");\n    } catch (error) {\n      console.error(\"Failed to create order:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Update user's purchasedOrders list\n  app.put(\"/api/users/:userId/purchasedOrders\", async (req, res) => {\n    try {\n      const userId = req.params.userId;\n      const { orderId } = req.body;\n\n      await db.collection(\"users\").updateOne(\n        { id: userId },\n        {\n          $addToSet: { purchasedOrders: orderId }, // $addToSet prevents duplicates\n        }\n      );\n\n      res.status(200).send(\"Purchased orders updated\");\n    } catch (error) {\n      console.error(\"Failed to update purchased orders:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Get a specific order by orderId\n  app.get(\"/api/payment/:orderId\", async (req, res) => {\n    try {\n      const orderId = parseInt(req.params.orderId); // Convert orderId to integer if stored as integer in MongoDB\n      const order = await db.collection(\"orders\").findOne({ orderId });\n      if (!order) {\n        res.status(404).send(\"Order not found\");\n      } else {\n        res.json(order);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch order:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // PUT endpoint to update order\n  app.put(\"/api/orders/:orderId/update\", async (req, res) => {\n    const orderId = parseInt(req.params.orderId);\n    const { address, paymentDetails, orderStatus } = req.body;\n\n    try {\n      const result = await db.collection(\"orders\").updateOne(\n        { orderId: orderId },\n        {\n          $set: {\n            address: address,\n            paymentDetails: paymentDetails,\n            orderStatus: orderStatus,\n          },\n        }\n      );\n\n      if (result.modifiedCount === 0) {\n        res.status(404).send(\"Order not found\");\n      } else {\n        res.status(200).send(\"Order updated\");\n      }\n    } catch (error) {\n      console.error(\"Failed to update order:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // Get all orders for a specific user\n  app.get(\"/api/orders/user/:userId\", async (req, res) => {\n    try {\n      const userId = req.params.userId;\n      const orders = await db\n        .collection(\"orders\")\n        .find({ userId: userId })\n        .toArray();\n      if (orders.length === 0) {\n        res.status(404).send(\"No orders found for this user.\");\n      } else {\n        res.status(200).json(orders);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch orders for user:\", error);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  });\n\n  // ------------------------ end of orders ------------------------\n  // Get products from products table\n  app.get(\"/api/products\", async (req, res) => {\n    const products = await db.collection(\"products\").find({}).toArray();\n    res.send(products);\n  });\n\n  app.get(\"/api/users/:userId/cart\", async (req, res) => {\n    const user = await db\n      .collection(\"users\")\n      .findOne({ id: req.params.userId });\n    const populatedCart = await populatedCartIds(user?.cartItems || []); // passing cartItems as ids argument\n    res.json(populatedCart);\n  });\n\n  app.get(\"/api/product/:productId\", async (req, res) => {\n    const productId = req.params.productId;\n    console.log(\"productId :\", typeof productId, productId);\n    const product = await db.collection(\"products\").findOne({ id: productId });\n    res.json(product);\n  });\n\n  // ------ Add item to cart w/ POST callback function\n  app.post(\"/api/users/:userId/cart\", async (req, res) => {\n    const userId = req.params.userId;\n    const productId = req.body.id;\n\n    const existingUser = await db.collection(\"users\").findOne({ id: userId }); // id in MongoBD's user collection that is equal to userId from firebaseAuth\n\n    if (!existingUser) {\n      await db.collection(\"users\").insertOne({ id: userId, cartItems: [] }); // If not there already, insert into the collection.\n    }\n\n    await db.collection(\"users\").updateOne(\n      { id: userId },\n      {\n        $addToSet: { cartItems: productId }, // $addToSet doesn't add duplicate items like $push\n      }\n    );\n    const user = await db\n      .collection(\"users\")\n      .findOne({ id: req.params.userId });\n    const populatedCart = await populatedCartIds(user?.cartItems || []); // passing cartItems as ids argument\n    res.json(populatedCart);\n  });\n\n  // ------ Remove item from cart w/ DELETE callback function\n  app.delete(\"/api/users/:userId/cart/:productId\", async (req, res) => {\n    const userId = req.params.userId;\n    const productId = req.params.productId;\n    await db.collection(\"users\").updateOne(\n      { id: userId },\n      {\n        $pull: { cartItems: productId },\n      }\n    );\n    const user = await db\n      .collection(\"users\")\n      .findOne({ id: req.params.userId });\n    const populatedCart = await populatedCartIds(user?.cartItems || []); // passing cartItems as ids argument\n    res.json(populatedCart);\n  });\n\n  app.listen(8000, () => {\n    console.log(\"Server is listening on port 8000\");\n  });\n}\n\nstart();\n"],"mappings":"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","ignoreList":[]}},"mtime":1717310252073}}
>>>>>>> 691113dc8cc9f5adcc8e781548331f450774cadf
